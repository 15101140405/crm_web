(function(d,c){var a=false;if(c.navigator.userAgent.match(/(UCBrowser|UCWeb)/i)){a=true}var b=function(g){var h=g.aslider;var f=this;var l=[];this.bindArray=g.bindArray;this.asideSlideOut=function(n){if(n.is(":visible")){var o=n.data("aslider-fade");if(o===""||o||n.isFade){n.find(".bg").removeClass("fade_in");n.find(".bg").addClass("fade_out")}n.find(".wrapper").removeClass("slide_in");n.find(".wrapper").addClass("slide_out")}l.pop();if(l.length===0){d("body").unbind("touchmove")}};this.resetScroll=function(n){if(n.is(":visible")){var o="translate3d(0,0,0)";n.find(".slider").css({"-webkit-transform":o,"-moz-transform":o,"-ms-transform":o,"transform":o});i=0;m=0}};this.asideSlideIn=function(n){n.css("display","block");setTimeout(function(){var o=n.data("aslider-fade");if(o===""||o||n.isFade){n.find(".bg").removeClass("fade_out");n.find(".bg").addClass("fade_in")}n.find(".wrapper").removeClass("slide_out");n.find(".wrapper").addClass("slide_in");l.push(n);d("body").bind("touchmove",function(p){p.preventDefault()})},100)};this.__instance=function(o){var n=Object.create(d.aslider.instance);d.aslider.instanceList.push(n);n.$el=o;return n};this.instance={loadmore:false,loadmoreCbk:new Function,isLoaing:false,_onPageEnd:function(){if(this.loadmore){this.loadmoreCbk()}return d.aslider.get(this.$el)},_startLoading:function(){if(!this.loadmore){return d.aslider.get(this.$el)}if(this.isLoaing){return d.aslider.get(this.$el)}this.isLoaing=true;this.$el.find(".slider").append('<div class="loadmore">正在加载中...</div>')},config:function(n){this.loadmore=n.loadmore||false;return d.aslider.get(this.$el)},append:function(n){this.$el.find(".slider").append(n);return d.aslider.get(this.$el)},onLoading:function(n){if(!this.loadmore){return d.aslider.get(this.$el)}this.loadmoreCbk=n;return d.aslider.get(this.$el)},doneLoading:function(){if(!this.loadmore){return d.aslider.get(this.$el)}this.$el.find(".loadmore").remove();this.isLoaing=false;return d.aslider.get(this.$el)},noMore:function(){this.$el.find(".loadmore").remove();this.$el.find(".slider").append('<div class="loadmore">没有更多了</div>');var n=this}};this.instanceList=[];this.get=function(o){if(typeof o=="string"){o=d(o)}var n;this.instanceList.forEach(function(q,p){if(o[0]==q.$el[0]){n=q}});if(n){return n}else{return new this.__instance(o)}};function k(n,o){if(typeof(n)=="undefined"){return}n.click(function(p){f.asideSlideIn(o)})}function j(n){var o;d("[data-aslider]").each(function(p,q){if(q==n){o=q;return false}d(q).find(".close").each(function(r,s){if(n==s){o=q;return false}else{return true}})});return d(o)}d(h).bind("webkitTransitionEnd",function(n){m=0;i=0;d(this).find(".slider").css({"-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-ms-transform":"translate(0,0)","transform":"translate(0,0)"});if(d(this).find(".slide_out")[0]){d(this).css("display","none")}});d(h).bind("transitionEnd",function(n){m=0;i=0;d(this).find(".slider").css({"-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-ms-transform":"translate(0,0)","transform":"translate(0,0)"});if(d(this).find(".slide_out")[0]){d(this).css("display","none")}});d(h).on("click",".close",function(o){if(this==o.target){var n=j(this);f.asideSlideOut(n)}});d(document).on("click",'[data-aslider="'+d(h).data("aslider")+'"]',function(o){if(d(this).hasClass("close")){if(this==o.target){var n=j(this);f.asideSlideOut(n)}}});var i=0;var m=0;d(h).each(function(n,s){if(!d(s).hasClass("aslider")){d(s).addClass("aslider")}if(a){d(s).find(".wrapper").addClass("for_uc")}var r=0;var q=d(s).find(".wrapper").children();if(d(s).find(".slider").length==0){var t=d("<div class='slider'></div>");t.append(q);d(s).find(".wrapper").append(t)}else{var t=d(s).find(".slider")}if(d(s).find(".scroll").length==0){var p=d("<div class='scroll'></div>");t.before(p);p.append(t)}var o=false;t.on("mousedown",function(u){o=true;i=u.pageY});t.on("touchstart",function(u){i=u.touches[0].pageY});t.on("mousemove",function(A){if(!o){return}var w=A.pageY;var v=w-i;var u=d(this)[0].scrollHeight;var z=0;d(s).find(".wrapper").children().each(function(C,D){if(!d(D).hasClass("scroll")){z+=d(D).height()}});var y=0;d(this).children().each(function(C,D){y+=d(D).height()});if(y<=d(this).height()-z){return}var x=u-d(this).parent().height();m=m+v;if(m<x*-1){m=x*-1}if(m>0){m=0}var B="translate3d(0,"+m+"px,0)";d(this).css({"-webkit-transform":B,"-moz-transform":B,"-ms-transform":B,"transform":B});i=w});t.on("touchmove",function(A){var w=A.touches[0].pageY;var v=w-i;var u=d(this)[0].scrollHeight;var z=0;d(s).find(".wrapper").children().each(function(C,D){if(!d(D).hasClass("scroll")){z+=d(D).height()}});var y=0;d(this).children().each(function(C,D){y+=d(D).height()});if(y<=d(this).height()-z){return}var x=u-d(this).parent().height();m=m+v;if(m<x*-1){m=x*-1}if(m>0){m=0}if(m==-x){if(!d.aslider.get(d(s)).isLoaing){d.aslider.get(d(s))._onPageEnd()._startLoading()}}var B="translate3d(0,"+m+"px,0)";d(this).css({"-webkit-transform":B,"-moz-transform":B,"-ms-transform":B,"transform":B});
i=w});d(document).on("mouseup",function(u){o=false});t.on("touchend",function(u){})});g.bindArray.forEach(function(n){k(d(n.initialator),d(n.slider));if(n.options.isFade){d(n.slider).data("aslider-fade",n.options.isFade)}else{d(n.slider).find(".bg").css("opacity","0")}d(n.slider).data("aslider-direction",n.options.direction);d(n.slider).find(".wrapper").addClass(n.options.direction)})};var e=function(f,i){var g=[];var j=[];f=f||"[data-aslider-in]";i=i||"[data-aslider]";d(f).each(function(k,n){var p=String(d(this).data("aslider-in")).split("|");var o=p[0];g.push({initialator:this,slider:'[data-aslider="'+o+'"]',options:{isFade:(function(){var q=false;p.forEach(function(s,r){if(s=="fade"){q=true;return false}});return q})(),direction:(function(){var q="right";p.forEach(function(s,r){if(s=="right"||s=="left"||s=="top"||s=="bottom"){q=s;return false}});return q})(),size:(function(){var q="100%";var r="right";p.forEach(function(t,s){if(t=="right"||t=="left"||t=="top"||t=="bottom"){r=t;return false}})})(),isBlock:(function(){})()}});for(var m in j){if(j[m]==d(n).data("aslider-in")){return}}j.push(d(n).data("aslider-in"));var l=d("<div class='bg close'></div>");d(g[g.length-1].slider).prepend(l)});var h={"aslider":i,"bindArray":g};return h};d(function(){var f=e();d.aslider=d.asideSlider=new b(f);d.aslider.AsideSlider=b;d.aslider.init=e;d.asideSlider.init=e})})(Zepto,window);(function(d,c,e){var b=function(h,g){this.settings=d.extend({},b.defaults,g);this.$element=d(h);var f=document.createElement("canvas");this.canvas=f;this.$element.append(f);this.ctx=f.getContext("2d");this.current_value=this.settings.initValue||this.settings.minValue||0};b.prototype={constructor:a,init:function(){var i=this.settings,h=this.canvas,g=this.ctx,k=(i.radius+i.curbarWidth)*2,l=i.basecirc,f=i.basequare,j=i.radius+i.curbarWidth;this._formatter=typeof(i.format)=="function"?i.format:this._formatter(i.format);this.maxLength=i.percentage?4:this._formatter(i.maxValue).length;h.width=k;h.height=k;g.strokeStyle=i.barBgColor;g.lineWidth=i.barWidth;g.beginPath();g.arc(j,j,i.radius,f,l,false);g.stroke();this.imgData=g.getImageData(0,0,k,k);this._value(this.current_value);return this},_formatter:function(f){return function(k){if(!f){return k.toString()}k=k||0;var h=k.toString().split("").reverse(),j=f.split("").reverse(),l=0,g=0;for(var m=j.length;l<m;l++){if(!h.length){break}if(j[l]=="#"){g=l;j[l]=h.shift()}}j.splice(g+1,j.lastIndexOf("#")-g,h.reverse().join(""));return j.reverse().join("")}},_value:function(j){if(j===e||isNaN(j)){return this.current_value}j=parseInt(j);var s=this.ctx,u=this.settings,n=u.barColor,g=u.circ,f=u.quart,m=(u.radius+u.barWidth)*2,p=u.minValue,r=u.maxValue,i=u.radius+u.curbarWidth;j=j<p?p:j>r?r:j;var h=Math.round(((j-p)*100/(r-p))*100)/100,k=u.percentage?h+"%":this._formatter(j);this.current_value=j;s.putImageData(this.imgData,0,0);s.strokeStyle=n;s.lineWidth=u.curbarWidth;if(u.roundCorner){s.lineCap="round"}s.beginPath();s.arc(i,i,u.radius,-(f),((g)*h/100)-f,false);s.stroke();if(u.displayNumber){var q=s.font.split(" "),l=u.fontWeight,t=u.fontSize||(m/(this.maxLength-(Math.floor(this.maxLength*1.4/4)-1)));q=u.fontFamily||q[q.length-1];s.fillStyle=u.fontColor||n;s.font=l+" "+t+"px "+q;s.textAlign="center";s.textBaseline="middle"}return this},drawAnimate:function(k){var j=this.settings,f=this.current_value||j.minValue,i=this,h=Math.ceil((j.maxValue-j.minValue)/(j.frameNum||(j.percentage?100:500))),g=k<f;if(this.intvFunc){clearInterval(this.intvFunc)}this.intvFunc=setInterval(function(){if((!g&&f>=k)||(g&&f<=k)){if(i.current_value==f){clearInterval(i.intvFunc);return}else{f=k}}i._value(f);if(f!=k){f=f+(g?-h:h)}},j.frameTime);return this},};b.defaults={radius:50,barWidth:5,curbarWidth:5,roundCorner:true,barBgColor:"#ccc",barColor:"#ef3030",basecirc:0,basequare:Math.PI*2,circ:Math.PI*2,quart:Math.PI/2,percentage:true,initValue:0,minValue:0,maxValue:100,displayNumber:true,fontFamily:null,fontColor:"#000",fontWeight:"bold",fontSize:null,format:null,frameTime:10,frameNum:null};function a(h,f){var g=new b(h,f);g.init();return g}d.fn.progress=function(f){return this.each(function(){var g=a(this,f)})};c.progress=a})(window.Zepto,window);